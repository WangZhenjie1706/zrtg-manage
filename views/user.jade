extends index
block head
    title= '用户信息'
block sidebar
    include sidebar1
block title1
    h2(align='center' style='color:#ffffff')
        | 用户信息详情
block content
    table#tb.table-stripe.table
        thead
            tr
                th
                    | ID
                th
                    | 权限
                th
                    | 账号
                th
                    | 密码
                th
                    | 修改/删除
        tbody
            each person in persons
                tr(class='#{person.class}')
                    td #{person.id}
                    td #{person.lv}
                    td #{person.username}
                    td #{person.userpwd}
                    td
                        button.btn.btn-sm.change(style='background:#576f95;color:#ffffff' data-toggle='modal' data-target='#modal3')
                            | 修改/删除



        script(type='text/javascript').
            $(document).ready(function () {
                $('#tb').DataTable({
                    "oLanguage": {
                        "oAria": {
                            "sSortAscending": " - click/return to sort ascending",
                            "sSortDescending": " - click/return to sort descending"
                        },
                        "sLengthMenu": "显示 _MENU_ 记录",
                        "sZeroRecords": "对不起，查询不到任何相关数据",
                        "sEmptyTable": "未有相关数据",
                        "sLoadingRecords": "正在加载数据-请等待...",
                        "sInfo": "当前显示 _START_ 到 _END_ 条，共 _TOTAL_ 条记录。",
                        "sInfoEmpty": "当前显示0到0条，共0条记录",
                        "sInfoFiltered": "（数据库中共为 _MAX_ 条记录）",
                        "sProcessing": "<img src='../resources/user_share/row_details/select2-spinner.gif'/> 正在加载数据...",
                        "sSearch": "模糊查询：",
                        "sUrl": "",
                        "oPaginate": {
                            "sFirst": "首页",
                            "sPrevious": " 上一页 ",
                            "sNext": " 下一页 ",
                            "sLast": " 尾页 "
                        }
                    }

                });
                $('.change').click(function () {
                    var id = $(this).parents('tr').children('td').html();
                    var lv = $(this).parents('tr').children('td').next().html();
                    var username = $(this).parents('tr').children('td').next().next().html();
                    var userpwd = $(this).parents('tr').children('td').next().next().next().html();
                    $('#change1').val(lv);
                    $('#change2').val(username);
                    $('#change3').val(userpwd);
                    $('.change').val(id);


                })
            })
